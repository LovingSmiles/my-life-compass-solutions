<!DOCTYPE html>
<html lang="en">

  <link rel="icon" href="assets/mlcs-logo-128.png">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact Us - My Life Compass Solutions</title>

  <!-- Global Styles -->
  <link rel="stylesheet" href="styles.css" />
  <!-- Floating Nav (site-wide) -->
  <link rel="stylesheet" href="assets/lcp-nav.css" />
  <script src="assets/lcp-nav.js" defer></script>

  <style>
    body { background:#f7f8fb; font-family:Arial, sans-serif; }
    main.wrap { max-width:900px; margin:40px auto; padding:0 16px; }
    h1 { text-align:center; color:#1e3a8a; margin-bottom:24px; }
    .card { background:#fff; border:1px solid #e5e7eb; border-radius:10px; padding:20px; margin-bottom:20px; box-shadow:0 2px 6px rgba(0,0,0,0.05); }
    .muted{ color:#667 }
    label { display:block; margin-bottom:12px; font-weight:600; }
    input, textarea, select { width:100%; padding:10px; border:1px solid #ccc; border-radius:6px; font:inherit; }
    textarea{ resize:vertical }
    .row{ display:grid; gap:12px; grid-template-columns:1fr }
    @media(min-width:700px){ .row-2{ grid-template-columns:1fr 1fr } }
    button { background:#2563eb; color:#fff; border:none; padding:10px 16px; border-radius:6px; cursor:pointer; }
    button[disabled]{ opacity:.6; cursor:not-allowed }
    button:hover:not([disabled]) { background:#1e40af; }
    .status { margin-top:10px; font-size:.95rem; }
    .ok{ color:#16a34a } .err{ color:#dc2626 }
    /* Privacy card */
    #privacy-purpose{background:#f9fafb;border:1px solid #e5e7eb;border-radius:10px;padding:18px}
    #privacy-purpose h3{margin:0 0 8px;color:#1e3a8a}
    #privacy-purpose p{margin:0 0 10px;line-height:1.6}
    #privacy-purpose .closer{font-weight:700;text-align:center;margin-top:14px}
  </style>
</head>
<link rel="stylesheet" href="lcp-nav.css">
    <script src="lcp-nav.js" defer></script>

<body>
  <!-- Floating nav mount -->
  <div id="lcp-nav"></div>

  <main class="wrap">
    <h1>Contact My Life Compass Solutions</h1>

    <section class="card">
      <h3>We’d love to hear from you</h3>
      <p class="muted">Questions, feedback, partnerships, press - drop us a note. If you’re offline, your message will be queued and sent automatically when you reconnect.</p>
    </section>

    <section class="card">
      <h3>Contact Information</h3>
      <p><strong>Email:</strong> <span id="email-placeholder">[Your email here]</span></p>
      <p><strong>Phone:</strong> <span id="phone-placeholder">[Your phone number here]</span></p>
      <p><strong>Address:</strong> <span id="address-placeholder">[Your address here]</span></p>
    </section>

    <section class="card">
      <h3>Send Us a Message</h3>
      <form id="contactForm" class="row" novalidate>
        <!-- Honeypot (leave empty) -->
        <input type="text" id="website" name="website" tabindex="-1" autocomplete="off" style="position:absolute;left:-9999px;opacity:0;height:0;width:0">

        <div class="row row-2">
          <label>Name
            <input type="text" id="name" required placeholder="Your full name" />
          </label>
          <label>Email
            <input type="email" id="email" required placeholder="you@example.com" />
          </label>
        </div>

        <label>Subject
          <input type="text" id="subject" placeholder="How can we help?" />
        </label>

        <label>Message
          <textarea id="message" rows="6" required placeholder="Write your message here..."></textarea>
        </label>

        <div class="row row-2">
          <label>Phone (optional)
            <input type="tel" id="phone" placeholder="555-123-4567" />
          </label>
          <label>Preferred reply method
            <select id="replyVia">
              <option value="email">Email</option>
              <option value="phone">Phone</option>
            </select>
          </label>
        </div>

        <button type="submit" id="btnSend">Send Message</button>
        <div class="status" id="status"></div>
      </form>
    </section>

    <!-- Privacy & Purpose section -->
    <section id="privacy-purpose" class="card">
      <h3>Privacy & Purpose - My Life Compass Solutions</h3>
      <p>At My Life Compass Solutions, we believe your memories, reflections, and growth belong to you - not to advertisers, not to big tech, and not to anyone else. Our mission is to empower individuals to live with purpose, privacy, and peace of mind by giving them full control over their personal data.</p>
      <p>Millions of people upload photos, journals, and personal content to social media or big tech platforms simply because their devices run out of space. They trade privacy for storage, often without realizing it. My Life Compass Solutions changes that.</p>
      <p>We’re building a platform designed to work anywhere, on any device - even offline - allowing you to store your progress, gratitude entries, goals, and life reflections locally and privately first. When you choose to back up or sync, your data is encrypted and stored only in your personal, private vault, never shared with any company, advertiser, or third party.</p>
      <p>We don’t track your habits, sell your data, or show you ads. Instead, we focus on what matters most: helping you organize your life, reflect on your journey, and move toward peace and clarity. Whether you’re journaling, uploading photos, setting goals, or reviewing your progress, everything you create remains entirely under your control.</p>
      <p>By design, My Life Compass Solutions provides a simple, inclusive alternative for those who don’t have high-end devices or large storage capacities. Our platform empowers everyone - regardless of technology or income - to take ownership of their digital lives without giving up privacy, security, or freedom.</p>
      <p class="closer">Your story is sacred.<br>Your data is protected.<br>Your life is yours to navigate.</p>
    </section>

    <footer class="muted" style="text-align:center;margin-top:16px">
      © 2025 My Life Compass Solutions — Privacy-first. Works offline.
    </footer>
  </main>

  <!-- EmailJS SDK (only used if provider is emailjs) -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

  <script>
  // ========== CONFIG: pick your provider ==========
  // Options: 'emailjs' or 'supabase'
  const EMAIL_PROVIDER = 'emailjs';

  // EmailJS config
  const EMAILJS_CFG = {
    publicKey: 'YOUR_EMAILJS_PUBLIC_KEY',
    serviceId: 'YOUR_SERVICE_ID',
    templateId: 'contact_template' // or your chosen id
  };

  // Supabase Edge Function config
  const SUPABASE_CFG = {
    url: 'https://YOUR-PROJECT.supabase.co',
    anonKey: 'YOUR_SUPABASE_ANON_KEY',
    functionPath: '/functions/v1/contact' // e.g., /functions/v1/contact
  };
  // ===============================================

  // Offline queue + helpers
  const QKEY = 'mlcs_contact_queue_v1';
  const $ = (s,r=document)=>r.querySelector(s);
  const saveQ = list => localStorage.setItem(QKEY, JSON.stringify(list));
  const readQ = ()=>{ try{ return JSON.parse(localStorage.getItem(QKEY)) || [] }catch{ return [] } };
  const sleep = ms => new Promise(r=>setTimeout(r,ms));
  let pageOpenAt = Date.now();

  function ui(msg, cls){
    const s = $('#status'); if(!s) return;
    s.className = 'status ' + (cls || '');
    s.textContent = msg;
  }

  // Rate limit: 1 message per 20 seconds
  const RATE_KEY = 'mlcs_contact_last_send';
  function canSendNow(){
    const last = +localStorage.getItem(RATE_KEY) || 0;
    return (Date.now() - last) > 20000;
  }
  function stampSent(){ localStorage.setItem(RATE_KEY, String(Date.now())); }

  // Provider implementations
  async function sendViaEmailJS(payload){
    if(!EMAILJS_CFG.publicKey || EMAILJS_CFG.publicKey.includes('YOUR_EMAILJS_PUBLIC_KEY')){
      throw new Error('EmailJS not configured');
    }
    if(window.emailjs && window.emailjs.init) emailjs.init(EMAILJS_CFG.publicKey);
    return await emailjs.send(EMAILJS_CFG.serviceId, EMAILJS_CFG.templateId, payload);
  }

  async function sendViaSupabase(payload){
    const {url, anonKey, functionPath} = SUPABASE_CFG;
    if(!url || url.includes('YOUR-PROJECT')){
      throw new Error('Supabase not configured');
    }
    const res = await fetch(url + functionPath, {
      method:'POST',
      headers:{
        'Content-Type':'application/json',
        'apikey': anonKey,
        'Authorization':'Bearer ' + anonKey
      },
      body: JSON.stringify(payload)
    });
    if(!res.ok) throw new Error('Supabase error ' + res.status);
    return await res.json().catch(()=>({ok:true}));
  }

  async function sendWithProvider(payload){
    if(EMAIL_PROVIDER === 'emailjs') return sendViaEmailJS(payload);
    if(EMAIL_PROVIDER === 'supabase') return sendViaSupabase(payload);
    throw new Error('Unknown provider');
  }

  // Queue flush
  async function tryFlushQueue(){
    const q = readQ(); if(!q.length) return;
    for(let i=0;i<q.length;i++){
      const item = q[i];
      try{
        await sendWithProvider(item);
        const rest = readQ().filter(x => x.__id !== item.__id);
        saveQ(rest);
        await sleep(300);
      }catch(e){
        return; // stop on first failure
      }
    }
  }
  window.addEventListener('online', tryFlushQueue);

  // Form handler
  document.getElementById('contactForm')?.addEventListener('submit', async (e)=>{
    e.preventDefault();
    const btn = $('#btnSend');
    const hp  = $('#website')?.value || '';
    const took = Date.now() - pageOpenAt;

    const name = $('#name')?.value.trim() || '';
    const email= $('#email')?.value.trim().toLowerCase() || '';
    const subject = $('#subject')?.value.trim() || 'Website contact';
    const message = $('#message')?.value.trim() || '';
    const phone = $('#phone')?.value.trim() || '';
    const replyVia = $('#replyVia')?.value || 'email';

    if(hp){ ui('Spam detected. Not sent.', 'err'); return; }
    if(took < 2000){ ui('Please take a moment to complete the form.', 'err'); return; }
    if(!name || !email || !message){ ui('Please fill name, email, and message.', 'err'); return; }
    if(!canSendNow()){ ui('Please wait a few seconds before sending again.', 'err'); return; }

    const payload = {
      name, email, subject, message, phone, replyVia,
      sentAt: new Date().toISOString(),
      userAgent: navigator.userAgent
    };

    btn.disabled = true; ui('Sending...', '');
    try{
      if(!navigator.onLine){
        payload.__id = crypto?.randomUUID?.() || Math.random().toString(36).slice(2);
        const q = readQ(); q.push(payload); saveQ(q);
        ui('You are offline. Message queued and will send when you reconnect.', 'ok');
      }else{
        await sendWithProvider(payload);
        ui('Message sent successfully. Thank you!', 'ok');
      }
      stampSent();
      $('#contactForm').reset();
    }catch(err){
      payload.__id = crypto?.randomUUID?.() || Math.random().toString(36).slice(2);
      const q = readQ(); q.push(payload); saveQ(q);
      ui('Could not send now. Saved and will retry automatically.', 'err');
    }finally{
      btn.disabled = false;
      tryFlushQueue();
    }
  });

  // Try flush a moment after load
  window.addEventListener('load', ()=> setTimeout(tryFlushQueue, 1200));
  </script>
  <div id="site-header" data-include="header.html"></div>
<script src="include.js" defer></script>
<script src="mood-switcher.js" defer></script>
<script src="lifecompass.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
</body>
</html>