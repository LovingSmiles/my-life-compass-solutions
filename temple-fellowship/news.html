<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Temple Visits • Temple Fellowship Network</title>
  <meta name="robots" content="noindex" />

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    #quote, #source {
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }

    @keyframes fadeIn {
      to { opacity: 1; }
    }

    .fade-in {
      animation: fadeIn 1.2s ease forwards;
      opacity: 0;
    }
  </style>
</head>

<body class="bg-gradient-to-b from-red-700 via-white to-blue-900 text-black min-h-screen flex flex-col">

  <!-- NAVIGATION -->
  <nav class="w-full bg-gradient-to-r from-red-700 via-white to-blue-900 border-b-4 border-white flex flex-wrap justify-center p-3">
    <a href="index.html" class="bg-white text-black font-bold border border-black rounded-md px-4 py-2 m-1 hover:bg-red-700 hover:text-white transition">Home</a>
    <a href="temples.html" class="bg-white text-black font-bold border border-black rounded-md px-4 py-2 m-1 hover:bg-red-700 hover:text-white transition">Temples</a>
    <a href="trips.html" class="bg-white text-black font-bold border border-black rounded-md px-4 py-2 m-1 hover:bg-red-700 hover:text-white transition">Trips</a>
    <a href="join-trip.html" class="bg-white text-black font-bold border border-black rounded-md px-4 py-2 m-1 hover:bg-red-700 hover:text-white transition">Start a Trip</a>
    <a href="photos.html" class="bg-white text-black font-bold border border-black rounded-md px-4 py-2 m-1 hover:bg-red-700 hover:text-white transition">Gallery</a>
    <a href="news.html" class="bg-white text-black font-bold border border-black rounded-md px-4 py-2 m-1 hover:bg-red-700 hover:text-white transition">Temple Visits</a>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="flex-1 max-w-3xl mx-auto w-full">
    
    <!-- HEADER -->
    <header class="bg-white/90 rounded-xl shadow-lg p-6 my-6 text-center fade-in">
      <h1 class="text-2xl sm:text-3xl font-bold">Temple Visits & News</h1>
      <p class="text-gray-700 mt-2">Share your temple trips, photos, and videos — and let others comment or be inspired by your experiences.</p>
    </header>

    <!-- POST FORM -->
    <section class="bg-white/90 rounded-xl shadow-lg p-6 my-6 fade-in">
      <h2 class="text-xl font-semibold border-b-2 border-black pb-2 mb-3 text-center">Share Your Visit</h2>

      <form id="newsForm" class="space-y-4">
        <div>
          <label class="block font-semibold">Your First Name (Only)</label>
          <input type="text" id="newsName" required class="w-full border border-black rounded-md p-2">
        </div>

        <div>
          <label class="block font-semibold">Temple Visited</label>
          <input type="text" id="newsTemple" required class="w-full border border-black rounded-md p-2">
        </div>

        <div>
          <label class="block font-semibold">Share Your Story</label>
          <textarea id="newsText" rows="4" required class="w-full border border-black rounded-md p-2"></textarea>
        </div>

        <div>
          <label class="block font-semibold">Upload Photo or Video</label>
          <input type="file" id="newsMedia" accept="image/*,video/*" class="w-full border border-black rounded-md p-2">
        </div>

        <button type="submit" class="bg-black text-white font-semibold rounded-lg px-5 py-2 hover:bg-red-700 hover:text-white transition w-full">
          Post Story
        </button>
      </form>
    </section>

    <!-- FEED -->
    <section id="newsFeed" class="space-y-6 mb-10"></section>
  </main>

  <!-- FOOTER -->
  <footer class="bg-white/90 border-t-4 border-black text-black text-center py-4 w-full">
    <p class="font-medium">Created by LovingSmiles • My Life Compass Solutions</p>
  </footer>

  <script>
    const form = document.getElementById('newsForm');
    const feed = document.getElementById('newsFeed');
    let posts = JSON.parse(localStorage.getItem('newsPosts') || '[]');

    function renderPosts() {
      feed.innerHTML = '';
      posts.slice().reverse().forEach((post, index) => {
        let mediaHTML = '';
        if (post.media && post.mediaType.startsWith('image/')) {
          mediaHTML = `<img src="${post.media}" class="rounded-lg w-full mt-3" alt="Temple Photo">`;
        } else if (post.media && post.mediaType.startsWith('video/')) {
          mediaHTML = `<video controls class="rounded-lg w-full mt-3"><source src="${post.media}" type="${post.mediaType}"></video>`;
        }

        const commentsHTML = post.comments.map(c =>
          `<div class='bg-gray-100 border border-black/30 rounded-md p-2 mt-2'><strong>${c.name}:</strong> ${c.text}</div>`
        ).join('');

        const card = document.createElement('section');
        card.className = "bg-white/90 rounded-xl shadow-lg p-6 fade-in";

        card.innerHTML = `
          <h3 class="text-xl font-bold border-b border-black pb-1 mb-2">${post.temple}</h3>
          <p class="text-gray-700 mb-1"><strong>${post.name}</strong> shared:</p>
          <p class="text-gray-800">${post.text}</p>
          ${mediaHTML}
          <div class="mt-4 border-t border-black/30 pt-3">
            <h4 class="font-semibold mb-2">Comments</h4>
            <div class="comment-list">${commentsHTML || '<p class="text-gray-600">No comments yet.</p>'}</div>
            <form class="comment-form mt-3 space-y-2" data-index="${index}">
              <input type="text" placeholder="Your name" required class="w-full border border-black rounded-md p-2">
              <input type="text" placeholder="Write a comment..." required class="w-full border border-black rounded-md p-2">
              <button type="submit" class="bg-black text-white px-3 py-1 rounded hover:bg-red-700 w-full transition">Add Comment</button>
            </form>
          </div>
        `;
        feed.appendChild(card);
      });
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      const name = document.getElementById('newsName').value.trim();
      const temple = document.getElementById('newsTemple').value.trim();
      const text = document.getElementById('newsText').value.trim();
      const file = document.getElementById('newsMedia').files[0];

      if (!name || !temple || !text) return alert('Please fill all required fields.');

      if (file) {
        const reader = new FileReader();
        reader.onload = () => {
          posts.push({
            name, temple, text,
            media: reader.result, mediaType: file.type,
            comments: []
          });
          localStorage.setItem('newsPosts', JSON.stringify(posts));
          renderPosts();
          form.reset();
        };
        reader.readAsDataURL(file);
      } else {
        posts.push({ name, temple, text, media: null, mediaType: '', comments: [] });
        localStorage.setItem('newsPosts', JSON.stringify(posts));
        renderPosts();
        form.reset();
      }
    });

    feed.addEventListener('submit', e => {
      e.preventDefault();
      if (!e.target.classList.contains('comment-form')) return;
      const index = e.target.dataset.index;
      const inputs = e.target.querySelectorAll('input');
      const commenter = inputs[0].value.trim();
      const comment = inputs[1].value.trim();
      if (!commenter || !comment) return;
      posts[index].comments.push({ name: commenter, text: comment });
      localStorage.setItem('newsPosts', JSON.stringify(posts));
      renderPosts();
    });

    renderPosts();
  </script>
</body>
</html>